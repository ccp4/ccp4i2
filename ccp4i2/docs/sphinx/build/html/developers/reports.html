
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#00020a">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>CCP4I2 Generating Reports &#8212; CCP4i2  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/contentui.css" />
    <link rel="stylesheet" type="text/css" href="https://github.com/bwithd/sphinx-material/blob/main/sphinx_material/sphinx_material/static/stylesheets/application.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/contentui.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Non-programming requirements for implementing CCP4i2 tasks" href="extras.html" />
    <link rel="prev" title="CCP4I2 Developers: Wrappers and Pipelines" href="pipelines.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=#005BBB data-md-color-accent=yellow>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="500" height="500" viewBox="0 0 500 500" id="__gitlab"><path fill="currentColor" d="M93.667 473.347l90.684-279.097H2.983l90.684 279.097z" transform="translate(156.198 1.16)"/><path fill="currentColor" d="M221.333 473.345L130.649 194.25H3.557l217.776 279.095z" transform="translate(28.531 1.16)" opacity=".7"/><path fill="currentColor" d="M32 195.155L4.441 279.97a18.773 18.773 0 0 0 6.821 20.99l238.514 173.29L32 195.155z" transform="translate(.089 .256)" opacity=".5"/><path fill="currentColor" d="M2.667-84.844h127.092L75.14-252.942c-2.811-8.649-15.047-8.649-17.856 0L2.667-84.844z" transform="translate(29.422 280.256)"/><path fill="currentColor" d="M2.667 473.345L93.351 194.25h127.092L2.667 473.345z" transform="translate(247.198 1.16)" opacity=".7"/><path fill="currentColor" d="M221.334 195.155l27.559 84.815a18.772 18.772 0 0 1-6.821 20.99L3.557 474.25l217.777-279.095z" transform="translate(246.307 .256)" opacity=".5"/><path fill="currentColor" d="M130.667-84.844H3.575l54.618-168.098c2.811-8.649 15.047-8.649 17.856 0l54.618 168.098z" transform="translate(336.974 280.256)"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#developers/reports" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="CCP4i2  documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">CCP4i2  documentation</span>
          <span class="md-header-nav__topic"> CCP4I2 Generating Reports </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://gitlab.com/ccp4i2/rstdocs" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__gitlab" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">CCP4i2  documentation</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Developer Notes</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="CCP4i2 documentation" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="CCP4i2 documentation">CCP4i2  documentation</a>
  </label>
    <div class="md-nav__source">
      <a href="https://gitlab.com/ccp4i2/rstdocs" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__gitlab" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
    </div>
  
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#developers-reports--page-root" class="md-nav__link">CCP4I2 Generating Reports</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#introduction" class="md-nav__link">Introduction</a>
        </li>
        <li class="md-nav__item"><a href="#handling-xml" class="md-nav__link">Handling XML</a>
        </li>
        <li class="md-nav__item"><a href="#ccp4reportparser-classes" class="md-nav__link">CCP4ReportParser classes</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#file-paths" class="md-nav__link">File paths</a>
        </li>
        <li class="md-nav__item"><a href="#tables" class="md-nav__link">Tables</a>
        </li>
        <li class="md-nav__item"><a href="#graphs" class="md-nav__link">Graphs</a>
        </li>
        <li class="md-nav__item"><a href="#pictures" class="md-nav__link">Pictures</a>
        </li>
        <li class="md-nav__item"><a href="#launch" class="md-nav__link">Launch</a>
        </li>
        <li class="md-nav__item"><a href="#help" class="md-nav__link">Help</a>
        </li>
        <li class="md-nav__item"><a href="#bibliographic-references" class="md-nav__link">Bibliographic references</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#accessing-other-program-output" class="md-nav__link">Accessing other program output</a>
        </li>
        <li class="md-nav__item"><a href="#customising-report-appearance" class="md-nav__link">Customising Report Appearance</a>
        </li>
        <li class="md-nav__item"><a href="#real-time-updating-reports" class="md-nav__link">Real-time updating reports</a>
        </li>
        <li class="md-nav__item"><a href="#creating-reports-for-pipelines" class="md-nav__link">Creating Reports for Pipelines</a>
        </li>
        <li class="md-nav__item"><a href="#examples-of-python-report-definitions" class="md-nav__link">Examples of Python Report Definitions</a>
        </li>
        <li class="md-nav__item"><a href="#testing-a-python-report-definitions" class="md-nav__link">Testing A Python Report Definitions</a>
        </li>
        <li class="md-nav__item"><a href="#appendix-a-the-database-data-accessible-in-the-jobinfo-dictionary" class="md-nav__link">Appendix A - The Database data accessible in the jobInfo dictionary</a>
        </li>
        <li class="md-nav__item"><a href="#appendix-b-the-ccp4mg-scene-file" class="md-nav__link">Appendix B - The CCP4mg scene file</a>
        </li>
        <li class="md-nav__item"><a href="#appendix-c-style-guide" class="md-nav__link">Appendix C - Style Guide</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../_sources/developers/reports.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="ccp4i2-generating-reports">
<h1 id="developers-reports--page-root">CCP4I2 Generating Reports<a class="headerlink" href="#developers-reports--page-root" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>The layout and content of job reports for CCP4i2 containing text,
graphs, tables, pictures and more can be defined in Python. This
supersedes an earlier version of report generation using an XML report
template (<em>xrt</em>) that is described <a class="reference external" href="./reports_xrt.html">here</a>. The
<em>CCP4ReportParser</em> module provides classes to represent all the features
of the report and simple functions to specify the report in minimal
code. For each task there should be a sub-class of
<em>CCP4ReportParser.Report</em> which is the top-level of the report
definition that I will refer to as the Python report definition - <em>prd</em>.</p>
<p>Usually the program or script will output an xml file containing the
job-specific data for the report. When the job completes (or otherwise -
see below) ccp4i2 instantiates the <em>prd</em> object and passes it a
representation of the XML data file. The <em>Report</em> class should construct
a tree of <em>Text</em>, <em>Graph</em>, <em>Table</em> etc. objects that represent the
required report and substitute data from the XML file (and other sources
if necessary) into the definition. The <em>Report.as_html_file()</em> method is
then called by the ccp4i2 framework to save the report to an HTML file.
Note that the report may contain Qt widgets that can only be displayed
in the CCP4i2 browser. Some extra features such as input/output data and
job status are added to the report automatically so need not be
specified explicitly in the report code. In future the functionality
could be extended to create alternative file formats. Note that Appendix
C contains a style guide to current best practice.</p>
<p>The <em>prd</em> file can be placed in either the <em>wrapper</em>, <em>pipeline</em> or
<em>task</em> directory for the task. At startup ccp4i2 will check for files
containing sub-classes of <em>Report</em> and make a lookup table based on the
<em>TASKNAME</em> parameter in the <em>prd</em>. If there is an error in the Python
file which prevents it being imported when CCP4i2 starts then this is
reported to the terminal and the <em>Program print log</em> (under <em>Utilities</em>
pull-down menu). Application developers should not normally need to use
it but the function <em>TASKMANAGER().getReportClass()</em> will return the
<em>Report</em> sub-class for a given taskname. Within ccp4i2 the <em>Report</em>
sub-class is instantiated with two arguments that may determine the sort
of output required: <em>jobStatus</em> which currently may have values
‘Running’, ‘Finished’, ‘Unsatisfactory’, or ‘Failed’ and <em>reportMode</em>
which currently may have values None (the default) or ‘subjob’ which
implies the request for a report is for a pipeline sub-job. Currently
the ‘subjob’ request will come from a user clicking a sub-job in the
Project Viewer and picking <em>View-&gt;Job report</em> from the context menu. The
<em>prd</em> should be customised to support these options.</p>
<div class="line-block">
<div class="line">The report class is should create the output appropriate for the
<em>jobStatus</em> which may be:</div>
<div class="line"><strong>Finished</strong> - the most common case - should create the usual report.</div>
<div class="line"><strong>Running</strong> - the job is still running and probably this requires
generating a short report showing progress (e.g. a graph showing
RFactor v. cycle). If this case is supported then a class variable
<em>RUNNING</em> should be set <em>True</em></div>
<div class="line"><strong>Unsatisfactory</strong> - the job has completed but without a good
scientific result. The report may be similar to the ‘Finished’ report
but should say what has happened and suggest what to do about it.</div>
<div class="line"><strong>Failed</strong> - the job has failed; a generic failed job report is
usually created by the core system but if the <em>CReport</em> sub-class
variable <em>FAILED</em> is set True then the a <em>CReport</em> sub-class is also
created and put at the top of the generic report. In this case a short
report on what has failed and what to do about it is appropriate.</div>
</div>
</section>
<section id="handling-xml">
<h2 id="handling-xml">Handling XML<a class="headerlink" href="#handling-xml" title="Permalink to this heading">¶</a></h2>
<p>The CCP4i2 libraries include <a class="reference external" href="lxml.de">lxml</a> which handles XML within
Python and provides many tools. For users convenience lxml provides the
same api as an earlier <em>etree</em> package so you are more likely to see the
word ‘etree’ rather than ‘lxml’ in code. The internal representation of
XML is as an <a class="reference external" href="lxml.de/tutorial.html">etree.Element</a> for which there
is brief (but likely enough for ccp4i2 developers) documentation within
the Python documentation
<a class="reference external" href="http://docs.python.org/2/library/xml.etree.elementtree.html#module-xml.etree.ElementTree">here</a>
(scroll down for Element). The most useful tool is
<a class="reference external" href="http://www.w3schools.com/xpath">xpath</a> which queries the XML.</p>
<p>In order to tidy up the report definition code there is a small CCP4i2
extension to <em>etree.Element</em> called <em>CCP4ReportParser.SearchableElement</em>
with the following methods (where input <em>path</em> is an xpath expression -
see the <a class="reference external" href="http://www.w3schools.com/xpath">xpath</a> docs). :</p>
<table>
<tbody>
<tr class="row-odd"><td><p>select</p></td>
<td><p>path</p></td>
<td><p>Return the content (element.text
or attribute) of the first item
satisfying the expression. Return
empty string if nothing satisfies</p></td>
</tr>
<tr class="row-even"><td><p>ifSelect</p></td>
<td><p>path,default=False</p></td>
<td><p>Return a Boolean from first item
satisfying the expresion or return
the default</p></td>
</tr>
<tr class="row-odd"><td><p>haspath</p></td>
<td><p>path</p></td>
<td><p>Return True/False if there is an
item satisfying the expression</p></td>
</tr>
<tr class="row-even"><td><p>xpath0</p></td>
<td><p>path</p></td>
<td><p>Return the first element
satisfying the expression or
return None</p></td>
</tr>
<tr class="row-odd"><td><p>xpath1</p></td>
<td><p>path</p></td>
<td><p>Return the first element
satisfying the expression or
return an empty element (tag
=’dummy’)</p></td>
</tr>
</tbody>
</table>
<p>To use these extensions the XML file must be loaded using a customised
parser. The ‘standard’ job XML output is passed to the Report object
already appropriately parsed but if you wish to load any other XML files
use the method <em>Report.loadXmlFile(fileName)</em></p>
</section>
<section id="ccp4reportparser-classes">
<h2 id="ccp4reportparser-classes">CCP4ReportParser classes<a class="headerlink" href="#ccp4reportparser-classes" title="Permalink to this heading">¶</a></h2>
<p>The report definition will have a tree structure with a <em>Report</em> object
as the root node. The child objects may be either container objects that
have children or content objects that represent features such as text or
tables.<em>Report</em> is a sub-class of <em>Container</em> (which should not be
used directly). The other useful sub-classes are <em>Fold</em> which creates a
‘fold’ in the report whose contents can be displayed or hidden by
clicking on a title line and <em>GraphGroup</em> or <em>PictureGroup</em> which groups
together multiple graphs or pictures to be displayed in the same widget.
There are several other <em>Container</em> types that are used to support the
logic in the XRT report definitions but these are not necessary to
support Python definitions.</p>
<p>The <em>__init__</em> method of all classes have three arguments that pass
along some basic data:</p>
<table>
<tbody>
<tr class="row-odd"><td><p>xrtnode</p></td>
<td><p>etree.Element</p></td>
<td><p>Supports XRT file method of report definition</p></td>
</tr>
<tr class="row-even"><td><p>xmlnode</p></td>
<td><p>etree.Element</p></td>
<td><p>The job XML output</p></td>
</tr>
<tr class="row-odd"><td><p>jobInfo</p></td>
<td><p>Python dictionary</p></td>
<td><p>Job information from the database</p></td>
</tr>
</tbody>
</table>
<p>There are also optional arguments to specify the <em>id</em> or <em>class</em>
attribute for the html element that may be useful for customising the
appearance of the report. Note that <em>class</em> is a reserved word in Python
so the Python argument is called <em>class_</em> and also some report features
have a fixed <em>class</em> attribute needed to support the standard
functionality.</p>
<p>The Python report definition should usually begin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">report.CCP4ReportParser</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">core.CCP4ErrorHandling</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">my_task_report</span><span class="p">(</span><span class="n">Report</span><span class="p">):</span>
  <span class="c1"># Specify which gui task and/or pluginscript this applies to</span>
  <span class="n">TASKNAME</span> <span class="o">=</span> <span class="s1">'my_task'</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">xmlnode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">jobInfo</span><span class="o">=</span><span class="p">{},</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">Report</span><span class="o">.</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">xmlnode</span><span class="o">=</span><span class="n">xmlnode</span><span class="p">,</span><span class="n">jobInfo</span><span class="o">=</span><span class="n">jobInfo</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errorReport</span><span class="p">()</span><span class="o">.</span><span class="n">maxSeverity</span><span class="p">()</span><span class="o">&gt;</span><span class="n">SEVERITY_WARNING</span><span class="p">:</span>
      <span class="nb">print</span> <span class="s1">'FAILED instantiating my_task report generator'</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">errorReport</span><span class="p">()</span><span class="o">.</span><span class="n">report</span><span class="p">()</span>
      <span class="k">return</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addGraph</span><span class="p">(</span> <span class="n">title</span><span class="o">=</span><span class="s2">"The best results"</span> <span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="s2">"//results/best"</span> <span class="p">)</span>
</pre></div>
</div>
<p>The task-specific report object will be instantiated with appropriate
<em>xmlnode</em> and <em>jobInfo</em> data by the ccp4i2 framework and must pass these
arguments onto the <em>Report</em> sub-class which will hand them on to its
child objects. The <em>xrtnode</em> argument is not used in the Python api and
can be ignored.</p>
<p>After calling <em>Report.__init__()</em> it is a good idea to check for errors
- <em>Container.errorReport()</em> will return an instance of
<a class="reference external" href="./error_handling.html">CCP4ErrorHandling.CErrorReport</a> which is a
list of errors recorded in the <em>Report</em> object and any child objects. If
there are any errors with severity greater than warning (likely to be
failing to read a file) then it is best to stop and, to aid debugging,
you can print out the error report with the <em>CErrorReport.report()</em>
method.</p>
<p>It is a good idea to split the report definition into different methods
for each element of the report rather than put the full definition in
the __init__() method. This will make it easier to change the report
structure or provide customised reports in different context (e.g. a
‘Running’ report may contain just a graph showing progress per cycle).
See the
<a class="reference external" href="../../tasks/buccaneer_build_refine/buccaneer_build_refine_report.py">buccaneer_build_refine</a>
for an example of this.</p>
<p>The application developer should usually create a new object using
methods such as <em>addGraph()</em> which creates a new object passing on the
standard arguments, adds the new object to its list of children and
returns the new object.</p>
<p>The table below lists the <em>addWhatever</em> methods and their arguments in
addition to the three standard and two optional (<em>id</em> and <em>class_</em>)
arguments. The methods of the individual content classes are also
included.</p>
<table>
<tbody>
<tr class="row-odd"><td><p><strong>Container</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Base container
class - should
not be used
itself</p></td>
</tr>
<tr class="row-even"><td><p>__init__</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>xrtnode</p></td>
<td><p>etree.Element</p></td>
<td><p>Supports XRT
file method of
report
definition</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>xmlnode</p></td>
<td><p>etree.Element</p></td>
<td><p>The job XML
output</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>jobInfo</p></td>
<td><p>Python
dictionary</p></td>
<td><p>Job
information
from the
database</p></td>
</tr>
<tr class="row-even"><td><p>loadXmlFile</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Read and parse
an XML file to
return an
etree.Element</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>fileName</p></td>
<td><p>string</p></td>
<td><p>File path</p></td>
</tr>
<tr class="row-even"><td><p>addDiv</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return a new
<em>Div</em> object</p></td>
</tr>
<tr class="row-odd"><td><p>addFold</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return a new
<em>Fold</em> object</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>label</p></td>
<td><p>string</p></td>
<td><p>Label to
appear on fold
bar</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>initiallyOpen</p></td>
<td><p>Boolean</p></td>
<td><p>Determines
whether the
<em>Fold</em> object
is initially
open</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>brief</p></td>
<td><p>string</p></td>
<td><p>A short label
to appear on
top bar of
report display</p></td>
</tr>
<tr class="row-odd"><td><p>addGraphGroup</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return a new
<em>GraphGroup</em>
object</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>launcher</p></td>
<td><p>string</p></td>
<td><p>Do not display
the graphs in
the report but
display a
button with
this label
that will
launch the
graph viewer
displaying the
graphs</p></td>
</tr>
<tr class="row-odd"><td><p>a
ddPictureGroup</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return a new
<em>PictureGroup</em>
object (not
fully
implemented)</p></td>
</tr>
<tr class="row-even"><td><p>addText</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add text to
report</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>text</p></td>
<td><p>string</p></td>
<td><p>text to add to
report - &lt;p&gt;
tags will be
added if text
is not
well-formed
xml</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>xpath string
to select text
from the xml
input</p></td>
</tr>
<tr class="row-odd"><td><p>addTable</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add a table to
the report</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>xpath
expression to
select list on
items in xml
input</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>exclud
eIfDataMissing</p></td>
<td><p>Boolean</p></td>
<td><p>If true
exclude any
column from
table for
which data not
found in xml</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>transpose</p></td>
<td><p>Boolean</p></td>
<td><p>If true print
out table
transposed
with row
headers</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>help</p></td>
<td><p>string</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>addGraph</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add a graph to
the report or
graphgroup</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>xpath
expression to
select list on
items in xml
input</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>title</p></td>
<td><p>string</p></td>
<td><p>Title for the
graph</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>help</p></td>
<td><p>string</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>launcher</p></td>
<td><p>string</p></td>
<td><p>Do not display
the graph in
the report but
display a
button with
this label
that will
launch the
graph viewer
displaying the
graph</p></td>
</tr>
<tr class="row-odd"><td><p>addPicture</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add a picture
to the report</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>scene</p></td>
<td><p>string</p></td>
<td><p>text ccp4mg
scene
description</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>sceneFile</p></td>
<td><p>string</p></td>
<td><p>Full path
filename for
file
containing
ccp4mg scene
description</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>label</p></td>
<td><p>string</p></td>
<td><p>Label for the
picture</p></td>
</tr>
<tr class="row-odd"><td><p>addCopy</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return a Copy
object that
copies xml
‘as-is’ into
the report</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>xpath
expression to
specify
element in
task XML</p></td>
</tr>
<tr class="row-odd"><td><p>addLaunch</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return a
Launch object
that puts a
Launch button
in the report</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>label</p></td>
<td><p>string</p></td>
<td><p>Label for
launch button</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>taskName</p></td>
<td><p>string</p></td>
<td><p>Name of task
to be launched</p></td>
</tr>
<tr class="row-even"><td><p>addHelp</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add help link
to report</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>label</p></td>
<td><p>string</p></td>
<td><p>Label for help
link</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>ref</p></td>
<td><p>string</p></td>
<td><p>path of file
to link to</p></td>
</tr>
<tr class="row-odd"><td><p>addReference</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add
bibliographic
reference to
appear in
‘References’
section of
report</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>authors</p></td>
<td><p>string</p></td>
<td><p>List of
authors</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>articleTitle</p></td>
<td><p>string</p></td>
<td><p>Title of
article</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>source</p></td>
<td><p>string</p></td>
<td><p>Source of
article</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>articleLink</p></td>
<td><p>string</p></td>
<td><p>link to
article on the
web</p></td>
</tr>
<tr class="row-even"><td><p><strong>Repor
t(Container)</strong></p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Obligatory top
container for
a report</p></td>
</tr>
<tr class="row-odd"><td><p>__init__</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>standardise</p></td>
<td><p>Boolean</p></td>
<td><p>If true add
the standard
features
(input/output
files etc) to
the report</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>xmlFile</p></td>
<td><p>string</p></td>
<td><p>File path for
XML file to be
read and used
as xmlnode</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>jobId</p></td>
<td><p>string</p></td>
<td><p>jobId for a
previously run
job whose info
can be
extracted from
database and
used as
jobInfo</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>htmlBase</p></td>
<td><p>string</p></td>
<td><p>Optional URL
for
<em>report_files</em>
directory
containing css
and js files -
default is for
CCP4i2 HTTP
server</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>cssFile</p></td>
<td><p>string</p></td>
<td><p>Optional
basename of a
css file
specific for
this report</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>jsFile</p></td>
<td><p>string</p></td>
<td><p>Optional
basename of a
js file
specific for
this report</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>cssVersion</p></td>
<td><p>string</p></td>
<td><p>The version
sub-directory
of
ccp4i
2/report_files
used to
provide css
and js files -
defaults to
the latest
version</p></td>
</tr>
<tr class="row-odd"><td><p>as_etree</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return an
etree
representation
of the html
report</p></td>
</tr>
<tr class="row-even"><td><p>as_html</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return html
text
representation
of the report</p></td>
</tr>
<tr class="row-odd"><td><p>as_html_file</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Write html
representation
to a file</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>fileName</p></td>
<td><p>string</p></td>
<td><p>Full path file
name</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>pretty_print</p></td>
<td><p>Boolean</p></td>
<td><p>If true output
in ‘pretty
print’ more
readable
format</p></td>
</tr>
<tr class="row-even"><td><p><strong>Di
v(Container)</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Create an html
div element -
used to group
other elements</p></td>
</tr>
<tr class="row-odd"><td><p>__init__</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><strong>Fol
d(Container)</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Folder in
report that
can be
opened/closed
by clicking
title line</p></td>
</tr>
<tr class="row-odd"><td><p>__init__</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>label</p></td>
<td><p>string</p></td>
<td><p>Label for
title line</p></td>
</tr>
<tr class="row-odd"><td><p><strong>GraphGrou
p(Container)</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Group graphs
that appear in
one graph
widget</p></td>
</tr>
<tr class="row-even"><td><p><strong>PictureGrou
p(Container)</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Group of
pictures to be
displayed
together and
put in one
CCP4mg
presentation.
<strong>Not fully
implemented.</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Table</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Display a
table</p></td>
</tr>
<tr class="row-even"><td><p>addData</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Specify one
column of data
for table</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>title</p></td>
<td><p>string</p></td>
<td><p>column title</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>subTitle</p></td>
<td><p>string</p></td>
<td><p>sub-title for
tables with
nested headers</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>xpath
expression to
select data
elements from
xml</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>data</p></td>
<td><p>list of
floats/ints</p></td>
<td><p>List of data
elements</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Graph</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Display a
graph</p></td>
</tr>
<tr class="row-even"><td><p>addData</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add the data
for one plot
on the graph</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>xmldata</p></td>
<td><p>List of
etree.Elements</p></td>
<td><p>List of
elements
(probably in
the task XML)
from which the
plot data is
taken</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>title</p></td>
<td><p>string</p></td>
<td><p>A legend for
the plot</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>An xpath
expression to
extract data
from
sub-elements
of xmldata</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>expr</p></td>
<td><p>string</p></td>
<td><p>A Python
expression to
be applied to
each data
element to
transform it</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>data</p></td>
<td><p>List of
int/float</p></td>
<td><p>The data to be
plotted</p></td>
</tr>
<tr class="row-even"><td><p>addTable</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add a table of
data taken
from the XML
as a
s
pace-separated
table</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>xmlnode</p></td>
<td><p>etree.Element</p></td>
<td><p>An element
(probably in
the task XML)
containing
table of data</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>xpath
expression to
sub-element of
xmlnode which
is the actual
table</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>headers</p></td>
<td><p>string</p></td>
<td><p>xpath
expression to
a list of
sub-elements
containing the
column header</p></td>
</tr>
<tr class="row-even"><td><p>addPlot</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add a plot
definition to
the graph</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>xmlnode</p></td>
<td><p>etree.Element</p></td>
<td><p>An element
(probably in
the task XML)
containing
instructions
for one plot</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>select</p></td>
<td><p>string</p></td>
<td><p>xpath
expression to
sub-element of
xmlnode which
is the actual
plot</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>plot</p></td>
<td><p>string</p></td>
<td><p>An
etree.Element
which is the
plot
definition</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>plotFile</p></td>
<td><p>string</p></td>
<td><p>The full path
of file
containing a
plot
definition</p></td>
</tr>
<tr class="row-odd"><td><p>addPlotObject</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Return a new
<em>Plot</em> object.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Plot</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Define one
plot to appear
on a graph</p></td>
</tr>
<tr class="row-odd"><td><p>append</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Add an element
to the XML
plot
definition</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>tag</p></td>
<td><p>string</p></td>
<td><p>The XML
element tag</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>text</p></td>
<td><p>string</p></td>
<td><p>The XML
element text</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>*</p></td>
<td><p>*</p></td>
<td><p>Additional
arguments
interpreted as
XML element
attributes</p></td>
</tr>
<tr class="row-odd"><td><p>validate</p></td>
<td></td>
<td></td>
<td><p>Validate the
plot
definition
against the
schema</p></td>
</tr>
<tr class="row-even"><td><p><strong>Picture</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Display a
picture</p></td>
</tr>
</tbody>
</table>
<section id="file-paths">
<h3 id="file-paths">File paths<a class="headerlink" href="#file-paths" title="Permalink to this heading">¶</a></h3>
<p>Specification of file paths can begin ‘$CCP4I2’ for files in the CCP4i2
distribution directory.</p>
</section>
<section id="tables">
<h3 id="tables">Tables<a class="headerlink" href="#tables" title="Permalink to this heading">¶</a></h3>
<p>The table layout and headers are specified by the <em>Container.addTable()</em>
and <em>Table.addData()</em> methods, the values are extracted from the task
XML. The table object has two optional arguments, <em>transpose</em> changes
the orientation of the table, and <em>select</em>, an XPATH expression which
extracts a list of elements containing row data. Each extracted element
is expected to contain all the information for a single table row.
Occasionally the data in the task XML may not be in a suitable form for
this, in which case the argument is omitted. The <em>addData()</em> method can
take four arguments: <em>title</em>, <em>subtitle</em>, <em>expr</em> and <em>select</em>. The
<em>title</em> argument gives the column header. The <em>subtitle</em> argument allows
tables with nested headers. The <em>select</em> argument specifies an xpath
expression to select the data to be displayed. If the <em>addTable()</em>
<em>select</em> argument has selected a list of row elements then this should
specify a unique element within that row element. If <em>addTable()</em> has no
<em>select</em> argument, the select should return a list of elements which
will become the column values. In the latter form there is no guarantee
columns will be of the same length. The <em>expr</em> argument enables a python
expression to be applied to the value before display.</p>
<p>Alternatively the Python script can extract and process the data as it
needs and then load it using the <em>data</em> argument of the <em>addData()</em>
method; this should be a list of values for a column of data.</p>
</section>
<section id="graphs">
<h3 id="graphs">Graphs<a class="headerlink" href="#graphs" title="Permalink to this heading">¶</a></h3>
<p>This is an interface to the <strong>pimple</strong> graph display program which will
be shown inline within the report. <em>pimple</em> can display multiple plots
in one window with two combo-boxes to allow selection of the current
plot. The left-hand combo-box will select a data table and the
right-hand box will select between views on that table. The <em>Graph</em>
object can only specify one data table with, optionally, multiple views
specified by the <em>addPlot</em> block. Multiple <em>Graph</em> objects can be
grouped in a <em>GraphGroup</em> object to be displayed in the same <em>pimple</em>
instance with the <em>title</em> arguments from each <em>addGraph()</em> appearing in
the left-hand combo-box.</p>
<p>The plotting directives for <em>pimple</em> can be entered as XML using the
<em>addPlot()</em> method or they can be specified in Python using the
<em>addPlotObject()</em> method. The latter returns a <em>Plot</em> object which can
then be populated using the <em>append()</em> method; this is a totally generic
method for defining the XML definition from Python with arguments that
specify the tag, text and an arbitrary number of attributes. The XML
data structure for a table and associated graphs is described
<a class="reference external" href="./pimple.html">here</a> . The <em>Plot.validate()</em> method will validate
the generated XML against the schema
<a class="reference external" href="../../pimple/CCP4ApplicationOutput.xsd">ccp4i2/pimple/CCP4ApplicationsOutput.xsd</a>
and returns a list of errors as a
<a class="reference external" href="./error_handling.html">CErrorReport</a>. There is an example of this in
<a class="reference external" href="../../tasks/buccaneer_build_refine/buccaneer_build_refine_report.py">buccaneer_build_refine</a>.</p>
<p>There can be multiple <em>Plot</em>s within one <em>Graph</em> - this implies that
multiple views of the same data table are possible and are listed in the
right-hand combo-box in <em>pimple</em>.</p>
<p>If the graph is instantiated with <em>launcher</em> parameter set then the
graph will not be shown in the report but there will be a button to
launch the graph viewer. The label on the button will be the value of
<em>launcher</em>.</p>
</section>
<section id="pictures">
<h3 id="pictures">Pictures<a class="headerlink" href="#pictures" title="Permalink to this heading">¶</a></h3>
<p>This makes a picture in the report with buttons to launch either CCP4mg
or Coot with the same view. The picture is generated by CCP4mg which
runs in background without appearing on the computer screen. CCP4mg
needs a <em>scene.xml</em> file to specify what it is to display and save as a
picture. The scene file specifies which data files (either coordinates
or maps) are to be loaded and how they should be drawn. The drawing
specification can be either a <em>simple scene</em> or generated using the
CCP4mg Picture Wizard. Many other aspects of the display can also be
specified using CCP4mg’s usual XML. The template for the scene.xml file
should be given as the <em>scene</em> argument or provided in a separate file
that is specified by the <em>sceneFile</em> argument. Typically some parameters
such as filenames need to be substituted into the scene.xml template and
this should be done using <em>database</em> or <em>select</em> attributes to specify
the source of the substituted data.</p>
<p>The contents of the CCP4mg scene file are explained in <a class="reference external" href="#appendix%20b">Appendix
B</a>.</p>
</section>
<section id="launch">
<h3 id="launch">Launch<a class="headerlink" href="#launch" title="Permalink to this heading">¶</a></h3>
<p>Insert a button in the report to launch another viewer. Currently
supports CCP4mg and Coot. The initial view in CCP4mg can be set by
specifying a <em>pictureDefinitionFile</em> argument.</p>
</section>
<section id="help">
<h3 id="help">Help<a class="headerlink" href="#help" title="Permalink to this heading">¶</a></h3>
<p>This puts a <em>Help</em> link by tables, graphs etc. and is highly
recommended! The <em>ref</em> argument gives the link reference which can be a
file path starting with an environment variable (eg $CCP4I2) and the
appropriate full path will be substituted into the html.</p>
</section>
<section id="bibliographic-references">
<h3 id="bibliographic-references">Bibliographic references<a class="headerlink" href="#bibliographic-references" title="Permalink to this heading">¶</a></h3>
<p>A section of references is automatically appended to a report provided
that the references information has been provided. It is necessary for
task developers to provide MedLine and BibTeX format references for each
task as described <a class="reference external" href="./pipelines.html#bibliographic_references">here</a>.
The <em>Report</em> sub-class should call the <em>addTaskReferences()</em> method. If
it is called without an argument this method will look for the
bibliographic reference files for the current task. A pipeline report
generator will probably need to call this method to get the references
for sub-tasks, for example for the buccaneer_build_refine pipeline that
uses Refmac the report generator includes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">addTaskReferences</span><span class="p">(</span><span class="s1">'buccaneer'</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">addTaskReferences</span><span class="p">(</span><span class="s1">'prosmart_refmac'</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively the information can be provided via the
<em>Report.addReference()</em> method but since this implies there is no
MedLine or BibTeX formated files available the tools for users to
download references will not be available.</p>
</section>
</section>
<section id="accessing-other-program-output">
<h2 id="accessing-other-program-output">Accessing other program output<a class="headerlink" href="#accessing-other-program-output" title="Permalink to this heading">¶</a></h2>
<p>Within i2, by default, the Report.__init__() is passed the etree
representation of one data XML file, <em>program.xml</em> from the top level
job directory. If you are creating a report for a pipeline you may need
to access data files from sub-jobs or data from other sources. The
report generator can access other files using the usual Python
functionality but it must know where to find the files. Within i2 the
Report.__init__() is passed a Python dictionary <em>jobInfo</em> which contains
some data extracted from the database (see <a class="reference external" href="#appendix%20a">Appendix
A</a>). The most useful thing is <em>jobInfo[‘fileroot’]</em>
that is the job directory for the pipeline job.</p>
<p>If you are running in test mode outside i2 <em>jobInfo</em> is empty. See
<a class="reference external" href="#testing">Testing</a> on how you should run one job and note the
<em>jobId</em> that you then pass into the report and it gets the <em>jobInfo</em>
from the database.</p>
<p>A potential problem is that the report class does not know exactly which
subjobs were run - an alternative approach is for the pipeline script to
merge the subjob xml files - there is an example in
<a class="reference external" href="../../tasks/buccaneer_build_refine/buccaneer_build_refine_report.py">pipelines/bucref/script/buccaneer_build_refine</a>.
This example uses xpath to pick bits out of the Refmac subjobs xml
output but you could just aim to put everything in one file with a
structure like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">thewholelot</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">pointless</span><span class="o">&gt;</span>
   <span class="n">copy</span> <span class="n">everything</span> <span class="kn">from</span> <span class="nn">subjob</span> <span class="n">output</span>
<span class="o">&lt;/</span><span class="n">pointless</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">aimless</span><span class="o">&gt;</span>
  <span class="n">copy</span> <span class="n">everything</span> <span class="kn">from</span> <span class="nn">subjob</span> <span class="n">output</span>
<span class="o">&lt;/</span><span class="n">aimless</span><span class="o">&gt;</span>
   <span class="ow">and</span> <span class="n">more</span>
<span class="o">&lt;/</span><span class="n">thewholelot</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>It is the responsibility of the developer to deal with the output from
different versions of CCP4i2 tasks and the different programs. Ideally
the report code in any release must be able to deal with the output from
any earlier version of the task or programs - so I’d suggest:</p>
<ul class="simple">
<li><p>program output has some meta-data header that includes the program
version</p></li>
<li><p>put each element definition (for graph,table,etc) in a separate
method - replicate the method if the given element changes
significantly</p></li>
<li><p>use try,except where the required data might not be available</p></li>
<li><p>python tricks such as ‘import whatever-3.1 as whatever’ could be used
to handle big changes</p></li>
</ul>
</section>
<section id="customising-report-appearance">
<h2 id="customising-report-appearance">Customising Report Appearance<a class="headerlink" href="#customising-report-appearance" title="Permalink to this heading">¶</a></h2>
<p>The appearance of reports is determined by css and Javascript files that
are referenced in the header of the generated html file. Individual
report html elements or groups of html elements for selection by
Javascript or css can be given <em>id</em> and/or <em>class</em> attributes by using
<em>id</em> or <em>class_</em> arguments to the element’s <em>__init__</em> method or to
the <em>Container.addWhatever</em> methods. Note the underscore in the
<em>class_</em> argument that is necessary to differentiate from a Python
reserved word. For example in the <em>buccaneer_build_refine_report.py</em>
there is the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">addGraph</span><span class="p">(</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Completeness by build-refine cycle"</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="s2">"//BuccaneerBuildRefineResult/BuildRefineCycle"</span><span class="p">,</span> <span class="nb">id</span> <span class="o">=</span> <span class="s2">"completenessGraph"</span><span class="p">)</span>
</pre></div>
</div>
<p>This will create a graph element in the html with the id
<em>completenessGraph</em>.</p>
<p>By default the css <em>xreport.css</em> and Javascript <em>xreport.js</em> files are
referenced in generated html files. These files have a pathname in the
CCP4i2 release such as <em>ccp4i2/docs/report_files/x.y.z/xreport.css</em>
where <em>x.y.z</em> is a version directory.Developers may add alternative css
or js files but please consider and discuss how your requirements might
be met by updating the default files. If you wish to use alternative
files then theg the filename (e.g. <em>whatever.css</em>) must be passsed as
argument <em>cssFile</em> or <em>jsFile</em> to <em>Report.__init__()</em>.</p>
<p>Future releases of CCP4i2 will retain old <em>report_files</em> version
directories in order to support any old report files. By default the
report parser will generate html to use the latest version available
unless <em>Report.__init__()</em> class has a <em>cssVersion</em> argument which is
set to an earlier version number. Developers are recommended to set this
parameter to the version that they have used in development of the <em>prd</em>
and to only update the value after they have tested against any more
recent version of <em>report_files</em>. If the <em>cssVersion</em> is set but there
is a higher minor version number available then that will be used on the
assumption that this minor version number increments are bug-fixes.</p>
<p>CCP4i2 uses an internal HTTP server to serve the files from
<em>report_files</em> and it usually expects these to have a URL beginning
<em>http://127.0.0.1:43434/report_files</em>. The port number (default 43434)
may change - reports are edited at display time to correct the port
number. Old report files which do not use the HTTP server are also be
updated to do so.</p>
</section>
<section id="real-time-updating-reports">
<h2 id="real-time-updating-reports">Real-time updating reports<a class="headerlink" href="#real-time-updating-reports" title="Permalink to this heading">¶</a></h2>
<p>A report can be generated and updated as a job is running - a drawback
is that at the moment the entire report is redone so speed is a possible
issue and the ‘running’ report should be not too long - usually an
updating graph is ideal. The report class should have the the class
parameter <em>RUNNING</em> set true so the system knows to call the report
generator as the job is running. The <em>Report.__init__()</em> method is
passed a <em>jobStatus</em> argument which will be <em>Running</em> and the
appropriate report should be returned.</p>
<p>By default the system watches a running job’s <em>program.xml</em> file and
when this file changes there is a redraw of the job report. If you
require to watch an alternative file then set the class attribute
<em>MyReport.WATCHED_FILE</em> to the name of the watched file or a relative
path to the file from the job directory.</p>
</section>
<section id="creating-reports-for-pipelines">
<h2 id="creating-reports-for-pipelines">Creating Reports for Pipelines<a class="headerlink" href="#creating-reports-for-pipelines" title="Permalink to this heading">¶</a></h2>
<p>In principle a report from a pipeline is no different from a report from
a wrapper but a pipeline report may want to incorporate some elements
from the sub-job reports. For this to be possible the sub-job report
should be written in modular fashion with separate methods for each
element in the report. The <em>Report.__init__()</em> method calls the
appropriate methods to generate the report dependent on the <em>jobStatus</em>
argument which is usually either <em>Finished</em>, <em>Unsatisfactory</em> or
<em>Running</em>. The <em>Report.__init__()</em> method should also handle a
<em>jobStatus</em> value of <em>noOutput</em> for which it returns without creating
any report elements. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyWrapperReport</span><span class="p">(</span><span class="n">Report</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">xmlnode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">jobInfo</span><span class="o">=</span><span class="p">{},</span><span class="n">jobStatus</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">Report</span><span class="o">.</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">xmlnode</span><span class="o">=</span><span class="n">xmlnode</span><span class="p">,</span><span class="n">jobInfo</span><span class="o">=</span><span class="n">jobInfo</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errorReport</span><span class="p">()</span><span class="o">.</span><span class="n">maxSeverity</span><span class="p">()</span><span class="o">&gt;</span><span class="n">SEVERITY_WARNING</span><span class="p">:</span>
      <span class="nb">print</span> <span class="s1">'FAILED instantiating MyWrapper report generator'</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">errorReport</span><span class="p">()</span><span class="o">.</span><span class="n">report</span><span class="p">()</span>
      <span class="k">return</span>

    <span class="c1"># 'nooutput' mode would be used by another report class that wanted</span>
    <span class="c1"># to use some method(s) from this class for its own report</span>
    <span class="k">if</span> <span class="n">jobStatus</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">jobStatus</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'nooutput'</span><span class="p">:</span>
      <span class="k">return</span>
    <span class="k">elif</span> <span class="n">jobStatus</span> <span class="o">==</span> <span class="s1">'Running'</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">completenessGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">completenessGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">picture</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">completenessGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">addGraph</span><span class="p">(</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Completeness by cycle"</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="s2">"//MyWrapper/Cycle"</span> <span class="p">)</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">addData</span> <span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Cycle"</span><span class="p">,</span>  <span class="n">select</span><span class="o">=</span><span class="s2">"Number"</span> <span class="p">)</span>
    <span class="o">...</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Note that here the method <em>completenessGraph</em> is passed a reference to
<em>self</em> so it will (in the first line) add a graph to <em>self</em> and then go
on to add details to that graph.</p>
<p>A pipeline that uses the <em>MyWrapper</em> wrapper and wanted to incorporate
elements from the <em>MyWrapperReport</em> could then do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">MyWrapperReport</span>
<span class="n">myWrapperXml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmlnode</span><span class="o">.</span><span class="n">xpath0</span><span class="p">(</span><span class="s1">'foo/bar'</span><span class="p">)</span>
<span class="n">myWapperReport</span> <span class="o">=</span> <span class="n">MyWrapperReport</span><span class="o">.</span><span class="n">MyWrapperReport</span><span class="p">(</span><span class="n">xmlnode</span><span class="o">=</span><span class="n">myWrapperXml</span><span class="p">,</span><span class="n">jobStatus</span><span class="o">=</span><span class="s1">'noOutput'</span><span class="p">)</span>
<span class="n">myWapperReport</span><span class="o">.</span><span class="n">picture</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we are assuming that the program xml for <em>MyWrapper</em> is embedded in
the pipeline xml and can be selected by the xpath ‘foo/bar’ and this is
then passed to <em>MyWrapperReport.__init__()</em> as the argument <em>xmlnode</em>.
Alternatively data may come from a separate file that should be passed
as the <em>xmlFile</em> argument. <em>MyWrapperReport.__init__()</em> is called with
<em>jobStatus=’noOutput’</em> so that it creates no output. The pipeline report
generator can then call the appropriate methods for the report elements
that it requires. It passes <em>self</em> as the <em>parent</em> argument so the
elements are appended to the pipeline report.</p>
<p>One possible issue with calling Report methods from different places is
that the top level of <em>Report.xmlNode</em>, the etree representation of the
XML data file, may not be at the same level in the hierarchy and this
will make writing xpath selections tricky. The solution may be to either
add or remove a top level etree element. Here are two examples assuming
we want the top level element to be ‘MYWRAPPER’. To remove some
redundant parent elements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmlNode</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">'MYWRAPPER'</span><span class="p">:</span>
  <span class="n">myWrapperNode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmlNode</span><span class="o">.</span><span class="n">xpath0</span><span class="p">(</span><span class="s1">'MYWRAPPER'</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">myWrapperNode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">xmlNode</span> <span class="o">=</span> <span class="n">myWrapperNode</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">"ERROR no MYWRAPPER node"</span>
</pre></div>
</div>
<p>Alternatively to add an extra parent element:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>
<span class="n">newNode</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s1">'NEWNODE'</span><span class="p">)</span>
<span class="n">newNode</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmlNode</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">xmlNode</span> <span class="o">=</span> <span class="n">newNode</span>
</pre></div>
</div>
</section>
<section id="examples-of-python-report-definitions">
<h2 id="examples-of-python-report-definitions">Examples of Python Report Definitions<a class="headerlink" href="#examples-of-python-report-definitions" title="Permalink to this heading">¶</a></h2>
<p>Currently best example:</p>
<div class="line-block">
<div class="line"><br/></div>
<div class="line"><a class="reference external" href="../../tasks/buccaneer_build_refine/buccaneer_build_refine_report.py">buccaneer_build_refine</a>
which creates ‘Running’ reports.</div>
<div class="line">a fragment for
<a class="reference external" href="../../test/report_test/pointless_report.py">pointless</a></div>
</div>
<p>Please ask Liz if you would like examples of other specific features.</p>
</section>
<section id="testing-a-python-report-definitions">
<h2 id="testing-a-python-report-definitions">Testing A Python Report Definitions<a class="headerlink" href="#testing-a-python-report-definitions" title="Permalink to this heading">¶</a></h2>
<p>If the following script fragment (with the appropriate name of the
report class replacing ‘my_task_report’) is appended to the python file
the script can be run from a Python prompt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">xmlFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">jobId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">reportFile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
  <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">os</span>
  <span class="k">if</span> <span class="n">reportFile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">xmlFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">reportFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">xmlFile</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="s1">'report.html'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">reportFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span><span class="s1">'report.html'</span><span class="p">)</span>
  <span class="n">r</span> <span class="o">=</span> <span class="n">my_task_report</span><span class="p">(</span><span class="n">xmlFile</span><span class="o">=</span><span class="n">xmlFile</span><span class="p">,</span><span class="n">jobId</span><span class="o">=</span><span class="n">jobId</span><span class="p">)</span>
  <span class="n">r</span><span class="o">.</span><span class="n">as_html_file</span><span class="p">(</span><span class="n">reportFile</span><span class="p">)</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">errorReport</span><span class="p">())</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span> <span class="nb">print</span> <span class="s1">'ERRORS:'</span><span class="p">,</span><span class="n">r</span><span class="o">.</span><span class="n">errorReport</span><span class="p">()</span>
</pre></div>
</div>
<p>It is easiest to test if you have previously run the task from the gui
so that there is program output xml and a jobId that can be input to the
test. The command line is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">CCCP4I2_TOP</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pyi2</span>

<span class="o">&gt;&gt;&gt;</span>  <span class="kn">import</span> <span class="nn">my_task_module</span>
<span class="o">&gt;&gt;&gt;</span>  <span class="n">my_task_module</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">my_xmlfile</span><span class="p">,</span><span class="n">my_jobid</span><span class="p">)</span>
</pre></div>
</div>
<p>The xml file should be the output xml from a job run previously and the
jobId (not the same as the job number which is displayed in the project
viewer) can be found in the meta-data header of files such as
<em>params.xml</em> and <em>input_params.xml</em>). This will create report called
<em>report.html</em> in the working directory.</p>
<p>Alternatively to test run the report parser in the GUI where you can see
the result better: after running an appropriate job once, close the GUI
while it is displaying the report for the job, delete the report.html
file for that job and reopen the GUI; it should recreate and display the
report.</p>
<p>A good current working example is in
tasks/buccaneer_build_refine/buccaneer_build_refine_report.py</p>
<p>Note that in the <em>test()</em> method above the <em>Report.errorReport()</em> method
is used to return a <a class="reference external" href="./error_handling.html">CErrorReport</a> which is a
list of errors and warnings recorded for the Report and its child
objects. If this has non-zero length then it is printed out.</p>
</section>
<section id="appendix-a-the-database-data-accessible-in-the-jobinfo-dictionary">
<h2 id="appendix-a-the-database-data-accessible-in-the-jobinfo-dictionary">Appendix A - The Database data accessible in the jobInfo dictionary<a class="headerlink" href="#appendix-a-the-database-data-accessible-in-the-jobinfo-dictionary" title="Permalink to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filenames</span> <span class="o">/</span> <span class="n">XYZIN</span>
          <span class="o">/</span> <span class="n">HKLIN</span>
          <span class="o">/</span> <span class="n">XYZOUT</span>
          <span class="o">/</span> <span class="n">HKLOUT</span>
          <span class="n">etc</span>
<span class="n">runtime</span>
<span class="n">status</span>
<span class="n">taskname</span>
<span class="n">jobid</span>
<span class="n">jobnumber</span>
<span class="n">projectid</span>
<span class="n">projectname</span>
<span class="n">tasktitle</span>
<span class="n">fileroot</span> <span class="o">-</span> <span class="n">the</span> <span class="n">job</span> <span class="n">directory</span>
<span class="n">descendentjobs</span> <span class="o">-</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">jobIds</span>
</pre></div>
</div>
</section>
<section id="appendix-b-the-ccp4mg-scene-file">
<h2 id="appendix-b-the-ccp4mg-scene-file">Appendix B - The CCP4mg scene file<a class="headerlink" href="#appendix-b-the-ccp4mg-scene-file" title="Permalink to this heading">¶</a></h2>
<p>NB this will only work with recent nightly build versions of CCP4mg
(post 16th Oct 2012).</p>
<p>A simple example of scene template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">scene</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">MolData</span> <span class="nb">id</span><span class="o">=</span><span class="s1">'id1'</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">filename</span> <span class="n">database</span><span class="o">=</span><span class="s2">"filenames/XYZOUT"</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">MolData</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">data</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">wizard</span><span class="o">&gt;&lt;</span><span class="n">template</span><span class="o">&gt;</span><span class="n">ribbons</span><span class="p">:</span><span class="n">colour</span> <span class="n">chains</span><span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">MolData1</span><span class="o">&gt;</span><span class="n">id1</span><span class="o">&lt;/</span><span class="n">MolData1</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">wizard</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">scene</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This template requires only one piece of substituted data - the <em>XYZOUT</em>
file from the <em>database</em> is substituted as the filename for the
<em>&lt;MolData&gt;&lt;filename&gt;</em> element to give the scene file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">&lt;</span><span class="n">ccp4i2_header</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span><span class="n">MGSCENE</span><span class="o">&lt;/</span><span class="n">function</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">projectName</span><span class="o">&gt;</span><span class="n">s12</span><span class="o">&lt;/</span><span class="n">projectName</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">userId</span><span class="o">&gt;</span><span class="n">lizp</span><span class="o">&lt;/</span><span class="n">userId</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ccp4iVersion</span><span class="o">&gt;</span><span class="mf">0.0.1</span><span class="o">&lt;/</span><span class="n">ccp4iVersion</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">jobId</span><span class="o">&gt;</span><span class="mi">66</span><span class="n">b40dd7146111e2875a3c0754185dfb</span><span class="o">&lt;/</span><span class="n">jobId</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">projectId</span><span class="o">&gt;</span><span class="mi">969</span><span class="n">cdfae138111e2acd83c0754185dfb</span><span class="o">&lt;/</span><span class="n">projectId</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">creationTime</span><span class="o">&gt;</span><span class="mi">14</span><span class="p">:</span><span class="mi">39</span> <span class="mi">12</span><span class="o">/</span><span class="n">Oct</span><span class="o">/</span><span class="mi">12</span><span class="o">&lt;/</span><span class="n">creationTime</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">jobNumber</span><span class="o">&gt;</span><span class="mi">4</span><span class="o">&lt;/</span><span class="n">jobNumber</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">ccp4i2_header</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ccp4i2_body</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">scene</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">MolData</span> <span class="nb">id</span><span class="o">=</span><span class="s2">"id1"</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;/</span><span class="n">Users</span><span class="o">/</span><span class="n">lizp</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">test_projects</span><span class="o">/</span><span class="n">s12</span><span class="o">/</span><span class="n">CCP4_JOBS</span><span class="o">/</span><span class="n">job_4</span><span class="o">/</span><span class="n">XYZOUT</span><span class="o">.</span><span class="n">pdb</span><span class="o">&lt;/</span><span class="n">filename</span><span class="o">&gt;</span>
       <span class="o">&lt;/</span><span class="n">MolData</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">data</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">wizard</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span><span class="n">ribbons</span><span class="p">:</span><span class="n">colour</span> <span class="n">chains</span><span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">MolData1</span><span class="o">&gt;</span><span class="n">id1</span><span class="o">&lt;/</span><span class="n">MolData1</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">wizard</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">scene</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">ccp4i2_body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">ccp4</span><span class="p">:</span><span class="n">ccp4i2</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This file has the standard CCP4i2 xml structure with a header containing
metadata describing the provenance of the file. The body of the file is
one or more <em>&lt;scene&gt;</em> elements. Each <em>&lt;scene&gt;</em> element contains a &lt;data&gt;
block that specifies the files to be loaded and a <em>&lt;wizard&gt;</em> block that
specifies how the data should be drawn using a CCP4mg wizard template.</p>
<p>The &lt;data&gt; block should list the files to be loaded as <em>&lt;MolData&gt;</em> or
<em>&lt;MapData&gt;</em> elements. These elements must have unique id attributes and
a <em>&lt;filename&gt;</em> sub-element. Usually the actually filename will need to
be substituted in from the filenames in the CCP4i2 database so the
<em>database</em> attribute should be used to specify the source of the
filename.</p>
<p>The <em>&lt;wizard&gt;</em> element should contain a <em>&lt;template&gt;</em> sub-element that
specifies the CCP4mg wizard template in the form <em>folder:template name</em>.
A template can be selected from the existing wizard templates which can
be viewed in CCP4mg or something appropriate can be created (see
ccp4mg/help/picture_wizard.html and talk to Liz or Stuart). Picture
wizard templates are partially a Python script which can apply some
intelligence in setting up a display but they can also have some options
which can be set. The options are in the <em>CHOICES</em> section of the wizard
template file. The <em>&lt;wizard&gt;</em> sub-element <em>&lt;parameters&gt;</em> should contain
sub-elements specifying values for the wizard ‘choices’ and particularly
should provide values for <em>MolData</em> and <em>MapData</em> parameters which
cross-reference to the <em>id</em> attributes of the sub-elements of the
<em>&lt;data&gt;</em> section. Note that although the wizard is mostly used in CCP4mg
to setup the display of a single coordinate file it can also be used to
specify the display of map objects and of multiple data objects.</p>
<p>There is an alternative mechanism to specify a simple scene that does
not use the wizard, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">scene</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">MolData</span> <span class="nb">id</span><span class="o">=</span><span class="s1">'id1'</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">filename</span> <span class="n">database</span><span class="o">=</span><span class="s2">"filenames/XYZOUT"</span><span class="o">/&gt;</span>
       <span class="o">&lt;</span><span class="n">MolDisp</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">select</span><span class="o">&gt;</span><span class="n">peptide</span><span class="o">&lt;/</span><span class="n">select</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">colour</span><span class="o">&gt;</span><span class="n">bychain</span><span class="o">&lt;/</span><span class="n">colour</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">style</span><span class="o">&gt;</span><span class="n">CYLINDERS</span><span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
       <span class="o">&lt;/</span><span class="n">MolDisp</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">MolData</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">MapData</span> <span class="nb">id</span><span class="o">=</span><span class="s1">'id2'</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">filename</span> <span class="n">database</span><span class="o">=</span><span class="s2">"filenames/HKLOUT"</span><span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="n">columns</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="mi">2</span><span class="n">FOFCWT</span> <span class="o">&lt;/</span><span class="n">F</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">PHI</span><span class="o">&gt;</span><span class="n">PH2FOFCWT</span> <span class="o">&lt;/</span><span class="n">PHI</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">columns</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">difColumns</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="n">FOFCWT</span> <span class="o">&lt;/</span><span class="n">F</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">PHI</span><span class="o">&gt;</span><span class="n">PHFOFCWT</span> <span class="o">&lt;/</span><span class="n">PHI</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">difColumns</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">model</span><span class="o">&gt;</span><span class="n">id1</span> <span class="o">&lt;/</span><span class="n">model</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">gridSize</span><span class="o">&gt;</span><span class="mf">0.5</span> <span class="o">&lt;/</span><span class="n">gridSize</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">contourUnits</span><span class="o">&gt;</span><span class="n">sigma</span> <span class="o">&lt;/</span><span class="n">contourUnits</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">MapDisp</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">contourLevel</span><span class="o">&gt;</span><span class="mi">3</span> <span class="o">&lt;/</span><span class="n">contourLevel</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">difference</span><span class="o">&gt;</span><span class="mi">1</span> <span class="o">&lt;/</span><span class="n">difference</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">MapDisp</span><span class="o">&gt;</span>
     <span class="o">&lt;/</span><span class="n">MapData</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">data</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">scene</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The <em>MolData</em> element can have one or more <em>MolDisp</em> sub-elements. Each
<em>MolDisp</em> element should contain <em>select</em>, <em>colour</em> and <em>style</em> elements
and can contain much more such as control of labels, visibility,
flashing - see the CCP4mg documentation. (????). Note that a <em>select</em>
attribute could be added to any of the elements so their values can be
taken from the program output.</p>
<p>Any of the aspects of CCP4mg presentation that can be controlled using
the CCP4mg XML format can also be incorporated in the scene file.
Probably the most useful feature is control of the view using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">View</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">centre_MolData</span><span class="o">&gt;</span><span class="n">id2</span> <span class="o">&lt;/</span><span class="n">centre_MolData</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">centre_selection</span><span class="o">&gt;</span><span class="n">A</span><span class="o">/</span><span class="mi">1170</span><span class="p">(</span><span class="n">DUP</span><span class="p">)</span> <span class="o">&lt;/</span><span class="n">centre_selection</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">orientation_auto</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">molData</span><span class="o">&gt;</span><span class="n">id2</span> <span class="o">&lt;/</span><span class="n">molData</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">selection</span><span class="o">&gt;</span><span class="n">A</span><span class="o">/</span><span class="mi">1170</span><span class="p">(</span><span class="n">DUP</span><span class="p">)</span> <span class="o">&lt;/</span><span class="n">selection</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">orientation_auto</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">scale_auto</span><span class="o">&gt;</span><span class="mi">1</span> <span class="o">&lt;/</span><span class="n">scale_auto</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">View</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Here the <em>MolData</em> object and (optionally) an atom selection that will
be the centre of the view are specified. The <em>orientation_auto</em> element
then tells CCP4mg to try to find the best orientation to show a
specified atom selection. <em>scale_auto</em> is a flag to CCP4mg to scale to
zoom of the specified atom selelction rather than show all visible
atoms.</p>
<p>Alternatively the scale,orientation and centring can be specified
explicitly. In this example variously other display parameters are set -
these could also be used the the ‘auto’ view parameters shown above.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">&lt;</span><span class="n">View</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">scale</span><span class="o">&gt;</span><span class="mf">58.0125</span>
   <span class="o">&lt;</span><span class="n">orientation</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">q0</span><span class="o">&gt;</span><span class="mf">0.0134139428983</span> <span class="o">&lt;/</span><span class="n">q0</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">q1</span><span class="o">&gt;</span><span class="mf">0.336496398576</span> <span class="o">&lt;/</span><span class="n">q1</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">q2</span><span class="o">&gt;-</span><span class="mf">0.507403789037</span> <span class="o">&lt;/</span><span class="n">q2</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">q3</span><span class="o">&gt;-</span><span class="mf">0.793178186004</span><span class="o">/</span><span class="n">q3</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">orientation</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">centre_xyz</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">x</span><span class="o">&gt;-</span><span class="mf">23.676</span><span class="o">&lt;/</span><span class="n">x</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">y</span><span class="o">&gt;</span><span class="mf">8.538</span><span class="o">&lt;/</span><span class="n">y</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">z</span><span class="o">&gt;</span><span class="mf">5.262</span><span class="o">&lt;/</span><span class="n">z</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">centre_xyz</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">fog_enabled</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">fog_enabled</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">fog_near</span><span class="o">&gt;-</span><span class="mf">1.1</span><span class="o">&lt;/</span><span class="n">fog_near</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">fog_far</span><span class="o">&gt;</span><span class="mf">26.01</span><span class="o">&lt;/</span><span class="n">fog_far</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">slab_offset</span><span class="o">&gt;</span><span class="mf">27.5</span><span class="o">&lt;/</span><span class="n">slab_offset</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">slab_enabled</span><span class="o">&gt;</span><span class="n">false</span><span class="o">&lt;/</span><span class="n">slab_enabled</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">slab_width</span><span class="o">&gt;</span><span class="mf">55.0</span><span class="o">&lt;/</span><span class="n">slab_width</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">View</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Note that it is possible to have more than one <em>scene</em> specified in the
file. It is intended that CCP4mg will use these either to create
multiple pictures in one program run or, if it is opened in interactive
mode, to create a Presentation which gives the user a choice of views.</p>
</section>
<section id="appendix-c-style-guide">
<h2 id="appendix-c-style-guide">Appendix C - Style Guide<a class="headerlink" href="#appendix-c-style-guide" title="Permalink to this heading">¶</a></h2>
<p>Firstly the ‘running’ reports that are updated in real time usually
consist of a graph that shows, for example, progress per cycle and
possibly a table showing initial, previous and current cycle values.</p>
<p>Final reports should begin with a short text summary of what the task
achieved, any issues and warning messages in red. The terminology here
(and throughout the report) should be consistent with the terminology
used in the gui and documentation. Links to documentation are
encouraged.</p>
<p>There is usually an open folder showing a graphical summary of the task
followed by closed folders with more detailed information possibly from
the separate steps of the task.</p>
<p>Visual presentation (i.e. graphs) is preferred over tables - thought
tables presenting the same information may be good. The usual good
practice for graphs - label axes, legends etc. apply. A simple clear
graph or multiple simple clear graphs are preferred over over-loaded
graphs (though beware what users might want to look at simultaneously.)</p>
<p>Last modified: Tue Jun 2 12:32:24 BST 2015</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="pipelines.html" title="CCP4I2 Developers: Wrappers and Pipelines"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> CCP4I2 Developers: Wrappers and Pipelines </span>
              </div>
            </a>
          
          
            <a href="extras.html" title="Non-programming requirements for implementing CCP4i2 tasks"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Non-programming requirements for implementing CCP4i2 tasks </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2020, CCP4.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.2.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>