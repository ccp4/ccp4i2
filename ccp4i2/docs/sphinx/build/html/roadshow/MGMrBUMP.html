
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#00020a">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Creating Molecular Replacement Search Ensembles with CCP4MG/MrBUMP in CCP4i2 &#8212; CCP4i2  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/contentui.css" />
    <link rel="stylesheet" type="text/css" href="https://github.com/bwithd/sphinx-material/blob/main/sphinx_material/sphinx_material/static/stylesheets/application.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/contentui.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=#005BBB data-md-color-accent=yellow>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="500" height="500" viewBox="0 0 500 500" id="__gitlab"><path fill="currentColor" d="M93.667 473.347l90.684-279.097H2.983l90.684 279.097z" transform="translate(156.198 1.16)"/><path fill="currentColor" d="M221.333 473.345L130.649 194.25H3.557l217.776 279.095z" transform="translate(28.531 1.16)" opacity=".7"/><path fill="currentColor" d="M32 195.155L4.441 279.97a18.773 18.773 0 0 0 6.821 20.99l238.514 173.29L32 195.155z" transform="translate(.089 .256)" opacity=".5"/><path fill="currentColor" d="M2.667-84.844h127.092L75.14-252.942c-2.811-8.649-15.047-8.649-17.856 0L2.667-84.844z" transform="translate(29.422 280.256)"/><path fill="currentColor" d="M2.667 473.345L93.351 194.25h127.092L2.667 473.345z" transform="translate(247.198 1.16)" opacity=".7"/><path fill="currentColor" d="M221.334 195.155l27.559 84.815a18.772 18.772 0 0 1-6.821 20.99L3.557 474.25l217.777-279.095z" transform="translate(246.307 .256)" opacity=".5"/><path fill="currentColor" d="M130.667-84.844H3.575l54.618-168.098c2.811-8.649 15.047-8.649 17.856 0l54.618 168.098z" transform="translate(336.974 280.256)"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#roadshow/MGMrBUMP" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="CCP4i2  documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">CCP4i2  documentation</span>
          <span class="md-header-nav__topic"> Creating Molecular Replacement Search Ensembles with CCP4MG/MrBUMP in CCP4i2 </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://gitlab.com/ccp4i2/rstdocs" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__gitlab" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">CCP4i2  documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="CCP4i2 documentation" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="CCP4i2 documentation">CCP4i2  documentation</a>
  </label>
    <div class="md-nav__source">
      <a href="https://gitlab.com/ccp4i2/rstdocs" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__gitlab" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
    </div>
  
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#roadshow-mgmrbump--page-root" class="md-nav__link">Creating Molecular Replacement Search Ensembles with CCP4MG/MrBUMP in CCP4i2</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#introduction" class="md-nav__link">Introduction</a>
        </li>
        <li class="md-nav__item"><a href="#example-gamma-test-data" class="md-nav__link">Example <em>gamma</em> test data</a>
        </li>
        <li class="md-nav__item"><a href="#example-2-5yca-optional-only-do-if-time-permits" class="md-nav__link">Example 2 <em>5yca</em> (Optional, only do if time permits)</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../_sources/roadshow/MGMrBUMP.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="creating-molecular-replacement-search-ensembles-with-ccp4mg-mrbump-in-ccp4i2">
<h1 id="roadshow-mgmrbump--page-root">Creating Molecular Replacement Search Ensembles with CCP4MG/MrBUMP in CCP4i2<a class="headerlink" href="#roadshow-mgmrbump--page-root" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This tutorial shows how to interactively use the model preparation steps
of the MrBUMP molecular replacement pipeline using CCP4MG. MrBUMP
requires only a sequence to prepare a search ensemble and therefore a
sequence is the only input required by CCP4i2 when using the
CCP4MG/MrBUMP task.</p>
<p>The task works in the following way:</p>
<ol class="arabic simple">
<li><p>CCP4MG is opened with the specified sequence as input. CCP4MG
displays this sequence.</p></li>
<li><p>CCP4MG immediately starts running the model preparation steps of
MrBUMP, which does the following:
The program <em>phmmer</em> is used to find a set of structures with similar
sequences to the input, but which have no more than specific value of
sequence similarity with each other.
The structures are then pruned using <em>Scupltor</em> and aligned using
<em>Gesamt</em>.</p></li>
<li><p>The pruned and aligned structures are then loaded into CCP4MG as
ribbon models.</p></li>
<li><p>The user may then change which atoms are displayed in CCP4MG. The
displayed atoms can then be saved in CCP4i2 as a molecular replacent
ensemble. Any number of different ensembles may be saved.</p></li>
</ol>
</section>
<section id="example-gamma-test-data">
<h2 id="example-gamma-test-data">Example <em>gamma</em> test data<a class="headerlink" href="#example-gamma-test-data" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Create a new project named e.g. <em>“mrbump_gamma”</em></p></li>
<li><p>Copy the CCP4 <em>gamma</em> test data to this project with the <em>Utilities
-&gt; Copy demo data to project -&gt; Gamma</em> menu item.
This will place the test data in
<em>$HOME/CCP4I2_PROJECTS/mrbump_gamma/gamma</em> (Mac and Linux) or
<em>C:Users&lt;your username&gt;CCP4I2_PROJECTSmrbump_gammagamma</em>
(Windows).</p></li>
<li><p>Click the task menu button in CCP4i2.
Expand the <strong>Bioinformatics including model preparation for Molecular
Replacement</strong> section.
Create a new <strong>Interactive model preparation - CCP4MG and MrBUMP</strong>
task.</p></li>
<li><p>As stated above, the only required input is a sequence. However, this
task - like many others - uses the CCP4i2 concept of <em>AU contents</em> as
its input. (In fact, CCP4i2 in the end just passes a single sequence
to CCP4MG, but this detail is not really important).
To input a sequence:</p>
<ul class="simple">
<li><p>Click on the <strong>Specify AU contents</strong> button.
Click on <strong>Browse for sequence file button</strong>, load <strong>gamma.pir</strong>
Click the <strong>Save</strong> button.</p></li>
<li><p>(Alternatively the drop-down menu may be used to select a
previously defined AU contents. This is relevant in real-life but
not for the purposes of this tutorial.)</p></li>
<li><p>There are two options in the CCP4MG/MrBUMP task: <strong>Non-redundancy
level for homologue search</strong>, this is the value which determines
how similar in sequence the search models can be; and <strong>Cutoff
threshold for phmmer results</strong>, this number is a score threshold
specific to the homelogue search - it may be reduced in cases
where there a very few homologues. We should leave both these at
their default values of 95 and 20 for this example.</p></li>
</ul>
</li>
<li><p>Click CCP4i2’s <em>Run</em> button. CCP4MG will open with the <em>gamma</em>
sequence displayed. Another window opens which shows, for the moment,
the MrBUMP log file. After a while this will change to a view showing
how the sequences of the search models match the input sequence. They
are ordered by <em>phmmer</em> score with the best at the top.</p></li>
<li><p>Move the MrBUMP results window so that you can see it and the main
CCP4MG window clearly. Move the <em>Show residues with gesamt variance</em>
slider to the left and see what happens to the displayed atoms. The
more the slider is moved to the left, the fewer the displayed atoms.
Lowering the slider value requests CCP4MG to display atoms which are
more conserved in 3D position between all the structures. Moving the
slider to the left will remove features such as loops with high
positional variability. The far right value of 110 means show
everything.</p></li>
<li><p>Set the slider to approximately 3/4 the way to the right (about 75).
Click on the <em>File</em> and select <strong>Save all visible to CC4i2
database</strong>. Repeat this with the slider about 1/2 way (50).</p></li>
<li><p>Quit CCP4MG. The CCP4i2 report for the task will show the search hits
found by MrBUMP and pictures of any ensembles saved by CCP4MG. These
ensembles will also be listed in the <em>Output data</em> section of the
report.</p></li>
<li><p>Try to perform molecular replacement with your first ensemble and the
<em>gamma_native.mtz</em> data.</p></li>
</ol>
</section>
<section id="example-2-5yca-optional-only-do-if-time-permits">
<h2 id="example-2-5yca-optional-only-do-if-time-permits">Example 2 <em>5yca</em> (Optional, only do if time permits)<a class="headerlink" href="#example-2-5yca-optional-only-do-if-time-permits" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Run an Import sequence job with the following in the <strong>Or enter the
rawtext of the sequence.. box</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="mi">5</span><span class="n">yca</span> <span class="mi">5</span><span class="n">yca</span>
<span class="n">GPETHINLKVSDGSSEIFFKIKKTTPLRRLMEAFAKRQGKEMDSLRFLYDGIRIEADQTPEDLDMEDNDIIEAHRSLPAE</span>
<span class="n">RNPLYKDDTLDHTPLIPKCRAQVIEFPDGPATFVRLKCTNPESKVPHFLMRMAKDSSISATSMFRSAFPKATQEEEDLEM</span>
<span class="n">RWIRDNLNPIEDKRVAGLWVPPADALALAKDYSMTPFINALLEASS</span>
</pre></div>
</div>
</li>
<li><p>Create a new CCP4MG/MrBump task.Set the AU contents to the input from
job 1. Set the Non-redundancy level for homologue search to 100</p></li>
<li><p>Run the MG/MrBump task. This time when the MrBUMP completes you
willnotice that only one model is loaded. This example requires more
careful consideration than the previous one. In this case their are 2
domains identified by MrBUMP. If you look at the MrBUMP results
window you willsee that the white bar at the top has “Domain 1” and
“Domain 2” written init and in the structures listed below, there is
one which overlaps stronglywith Domain 1 and several which overlap
with Domain 2. We are in fact interested in Domain 2.3. Uncheck “Show
MrBump models”, all models should disappear.Change the drop down menu
from “Domain 1” to “Domain 2”.Re-check “Show MrBump models”, many
models should appear.</p></li>
<li><p>Set the slider to approximately 3/4 the way to the right (about 75).
Click onthe File and select Save all visible to CC4i2 database. Quit
CCP4MG.</p></li>
<li><p>The output file of this task can now be used as a molecular
replacement search model. This will not be covered in this tutorial</p></li>
</ol>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2020, CCP4.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.2.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>