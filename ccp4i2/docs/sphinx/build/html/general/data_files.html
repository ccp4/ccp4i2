
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#00020a">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>CCP4i2 — Experimental Data Files in CCP4i2 &#8212; CCP4i2  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/contentui.css" />
    <link rel="stylesheet" type="text/css" href="https://github.com/bwithd/sphinx-material/blob/main/sphinx_material/sphinx_material/static/stylesheets/application.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/contentui.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=#005BBB data-md-color-accent=yellow>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="500" height="500" viewBox="0 0 500 500" id="__gitlab"><path fill="currentColor" d="M93.667 473.347l90.684-279.097H2.983l90.684 279.097z" transform="translate(156.198 1.16)"/><path fill="currentColor" d="M221.333 473.345L130.649 194.25H3.557l217.776 279.095z" transform="translate(28.531 1.16)" opacity=".7"/><path fill="currentColor" d="M32 195.155L4.441 279.97a18.773 18.773 0 0 0 6.821 20.99l238.514 173.29L32 195.155z" transform="translate(.089 .256)" opacity=".5"/><path fill="currentColor" d="M2.667-84.844h127.092L75.14-252.942c-2.811-8.649-15.047-8.649-17.856 0L2.667-84.844z" transform="translate(29.422 280.256)"/><path fill="currentColor" d="M2.667 473.345L93.351 194.25h127.092L2.667 473.345z" transform="translate(247.198 1.16)" opacity=".7"/><path fill="currentColor" d="M221.334 195.155l27.559 84.815a18.772 18.772 0 0 1-6.821 20.99L3.557 474.25l217.777-279.095z" transform="translate(246.307 .256)" opacity=".5"/><path fill="currentColor" d="M130.667-84.844H3.575l54.618-168.098c2.811-8.649 15.047-8.649 17.856 0l54.618 168.098z" transform="translate(336.974 280.256)"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#general/data_files" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="CCP4i2  documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">CCP4i2  documentation</span>
          <span class="md-header-nav__topic"> CCP4i2 — Experimental Data Files in CCP4i2 </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://gitlab.com/ccp4i2/rstdocs" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__gitlab" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">CCP4i2  documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="CCP4i2 documentation" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="CCP4i2 documentation">CCP4i2  documentation</a>
  </label>
    <div class="md-nav__source">
      <a href="https://gitlab.com/ccp4i2/rstdocs" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__gitlab" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
    </div>
  
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#general-data-files--page-root" class="md-nav__link">CCP4i2 — Experimental Data Files in CCP4i2</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#experimental-data-files" class="md-nav__link">Experimental data files</a>
        </li>
        <li class="md-nav__item"><a href="#importing-mtzs" class="md-nav__link">Importing MTZs</a>
        </li>
        <li class="md-nav__item"><a href="#mmcif-files" class="md-nav__link">mmCIf Files</a>
        </li>
        <li class="md-nav__item"><a href="#unmerged-reflection-data" class="md-nav__link">Unmerged reflection data</a>
        </li>
        <li class="md-nav__item"><a href="#unmerged-mtz" class="md-nav__link">Unmerged MTZ</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#map-files" class="md-nav__link">Map files</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#shelx-fa-files" class="md-nav__link">Shelx FA files</a>
        </li>
        <li class="md-nav__item"><a href="#phaser-sol-files" class="md-nav__link">Phaser sol files</a>
        </li>
        <li class="md-nav__item"><a href="#appendix-monster-and-mini-mtzs" class="md-nav__link">Appendix: Monster and Mini MTZs</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../_sources/general/data_files.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="ccp4i2-experimental-data-files-in-ccp4i2">
<h1 id="general-data-files--page-root">CCP4i2 — Experimental Data Files in CCP4i2<a class="headerlink" href="#general-data-files--page-root" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="CCP4i1Projects.html">CCP4i projects</a></p>
<p><a class="reference external" href="data_files.html">Experimental data</a></p>
<p><a class="reference external" href="model_data.html">Model data</a></p>
<p><a class="reference external" href="atom_selection.html">Atom selection</a></p>
<p><a class="reference external" href="servers.html">Servers</a></p>
<div class="content docutils container">
<p class="rubric" id="contents">Contents</p>
<p><a class="reference external" href="#Experimental">Experimental data files</a></p>
</div>
<section id="experimental-data-files">
<h2 id="experimental-data-files">Experimental data files<a class="headerlink" href="#experimental-data-files" title="Permalink to this heading">¶</a></h2>
<p>Within CCP4 all experimental data is saved in MTZ format files - these
can be regarded as a table with each row representing a reflection and
with a variable number of columns for experimentally observed data
(intensities and/or structure factures), phases, map coefficients and
freeR sets. The file also contains a ‘header’ that holds the spacegroup,
cell and other information. See the CCP4 website for
<a class="reference external" href="http://www.ccp4.ac.uk/dist/html/mtzformat.html">details</a>. It is
possible for a single MTZ file to contain a mixture of reflection data,
phases, map coefficients and freeR sets but within CCP4i2 we use ‘mini’
MTZs containing just one set of one type of data as explained
<a class="reference external" href="#monster">below</a>. The four types of experimental data are described
below. There is also a special MTZ format for unmerged data which is
described <a class="reference external" href="#unmergedMTZ">below</a>.</p>
<p>If you have experimental data in any alternative format you must first
convert it to MTZ using the tools in the <em>Reflection data tools</em> module.
An MTZ file can not be read as text but can be viewed with the <em>ViewHKL</em>
program (<a class="reference external" href="http://www.ccp4.ac.uk/newsletters/newsletter48/articles/ViewHKL/viewhkl.html">described
here</a>)
that is accessible from many places in CCP4i2.</p>
<p><img alt="Reflections icon" src="../../../qticons/ObsDataFile.png"/>The ‘reflection’ data is the observed reflection
intensities that come from data collection and have been scaled and
merged by the <em>Data reduction</em> task. Reflections are required input to
all the key structure solution and refinement tasks. Reflections can be
in one of four representations as either intensities or structure
factors and either Freidel pairs (usually called ‘I(+)I(-)’ for
intensities or ‘F(+)F(-)’ for structure factors) or the averaged Imean
or Fmean. The richest form from which all other can be derived is the
intensity Freidel pairs but not all programs work with this.</p>
<p><img alt="Free R set icon" src="../../../qticons/FreeRDataFile.png"/>The ‘Free R set’ flags a small proportion of the
reflections to be used in generating the ‘Free R’ statisitics in
refinement. A Free R set is usually generated as part of the <em>Data
reduction</em> task or the <em>Generate a Free R set</em> tool (in <em>Data reduction
and analysis</em> module) can be used. The same Free R set should be used
throughout one structure solution and is normally input to <em>Refinement</em>.</p>
<p><img alt="Phases icon" src="../../../qticons/PhsDataFile.png"/>Estimated phases are first generated by refinement after
molecular replacement or by experimental phasing. Some initial estimated
phases are required input to tasks that are trying to improove phases or
model such as <em>Density modification</em> and <em>Autobuild protein</em> and initial
phases can be input to <em>Refinement</em> and they will be output by
<em>Refinement</em>. Phases can be represented as Phis (angles) and FOMs
(figures of merit) or as Hendrickson-Lattmann (HL) coefficients which
are a set of four numbers per reflection. These two forms are
inter-convertible but with some loss of information in the direction HL
to Phi-FOM. We are moving towards always using the richer,
Hendrickson-Lattmann representation but this may not be input or output
by all programs yet.</p>
<p><img alt="Map coeffs icon" src="../../../qticons/MapCoeffsDataFile.png"/>Map coefficients consist of both structure factor and
phase data that are used by graphics programs, <em>Coot</em> or <em>CCP4mg</em> to
generate a map. Usually the map coefficent data has been scaled to
modify the map appearance and so should not be used in any other
context. The <em>Refinement</em> task normally outputs two sets of map
coefficients.</p>
</section>
<section id="importing-mtzs">
<h2 id="importing-mtzs">Importing MTZs<a class="headerlink" href="#importing-mtzs" title="Permalink to this heading">¶</a></h2>
<p>If you import data from an old-style, ‘monster’ MTZ which contains a
variety of data you will be asked to select the required columns in the
MTZ file in a window:</p>
<p><img alt="CCP4i2 data file widget" src="../_images/columnselectionwidget.png"/></p>
<p>In this window all of the data of the required type is listed with the
richest form shown first and selected by default. The selected data will
be copied to a mini MTZ that is then available for use throughout
CCP4i2. The window also has the option to enter the type of data
(observed, derived or reference data for reflections) and the label for
the data.</p>
</section>
<section id="mmcif-files">
<h2 id="mmcif-files">mmCIf Files<a class="headerlink" href="#mmcif-files" title="Permalink to this heading">¶</a></h2>
<p>mmCIF is a flexible file format which can contain model coordinates,
experimental data or other data. Each element of data in the file is
tagged and the generally recognised tags are specified in
<a class="reference external" href="http://mmcif.wwpdb.org/pdbx-mmcif-home-page.html">dictionaries</a>. The
format is used by the major structure databases (wwPDB, RCSB PDBe and
PDBj) to distribute data and also used by CCP4 for the small molecule
‘library’ that specifies the ideal molecule geometry.</p>
<p>The files can be viewed as text and can be viewed in CCP4i2 using the
appropriate tools for the type of data.</p>
<p><img alt="Coordinate icon" src="../../../qticons/PdbDataFile.png"/>Within CCP4i2 an mmCIF file containing model
coordinates can be read by the coordinate widget the same as the
alternative PDB format. All CCP4i2 tasks will work with either PDB or
MMCIF coordinate files.</p>
<p><img alt="Cif2mtz icon" src="../../../svgicons/cif2mtz.svg"/>An mmCIF file containing experimental data must be
explicitly imported by the <em>Convert merged reflections to MTZ</em> task in
the <em>Reflection data tools</em> module of the task menu.</p>
</section>
<section id="unmerged-reflection-data">
<h2 id="unmerged-reflection-data">Unmerged reflection data<a class="headerlink" href="#unmerged-reflection-data" title="Permalink to this heading">¶</a></h2>
</section>
<section id="unmerged-mtz">
<h2 id="unmerged-mtz">Unmerged MTZ<a class="headerlink" href="#unmerged-mtz" title="Permalink to this heading">¶</a></h2>
<p>The standard CCP4 file for unmerged data is a spacial case of the MTZ
file. It is produced by <em>Mosflm</em>, <em>Dials</em> or other data processing
programs from the experimental images and is input to the <em>Data
reduction</em> pipeline for conversion into merged MTZ data files. The
unmerged MTZ can be viewed in <em>ViewHKL</em> that shows a summary of the
columns in the file:</p>
<p><img alt="Unmerged MTZ summary in ViewHKL" src="../_images/unmerged_MTZ_summary.png"/></p>
<p><strong>***Discussion on unmerged file content</strong></p>
<p>See <a class="reference external" href="http://www.ccp4.ac.uk/html/mtzformat.html">MTZ format
documentation</a>.</p>
<p><strong>***Other unmerged formats</strong></p>
<section id="map-files">
<h3 id="map-files">Map files<a class="headerlink" href="#map-files" title="Permalink to this heading">¶</a></h3>
<p><img alt="Map file icon" src="../../../qticons/MapDataFile.png"/> A map file contains a 3D grid of calculated electron
density values usually for just the assymmetric unit (the unique
fraction of the unit cell). They are usually large files and CCP4i2 does
not normally create or keep electron density map files but instead uses
<a href="#id1"><span class="problematic" id="id2">`map coefficient &lt;&gt;`__</span></a> files that contain the structure factors and
phases necessary to calculate a map which is calculated as needed in
display (Coot or CCP4mg) or fitting programs. The exceptions are the
<em>Calculate map coefficients</em> task which is a flexible interface for
creating unusual maps which might be viewed in the display programs.</p>
<p>CCP4i2 only deals with the CCP4 map file format (extension .map) and to
import electron density maps you should convert structure factors and
phases to MTZ format.</p>
</section>
</section>
<section id="shelx-fa-files">
<h2 id="shelx-fa-files">Shelx FA files<a class="headerlink" href="#shelx-fa-files" title="Permalink to this heading">¶</a></h2>
</section>
<section id="phaser-sol-files">
<h2 id="phaser-sol-files">Phaser sol files<a class="headerlink" href="#phaser-sol-files" title="Permalink to this heading">¶</a></h2>
</section>
<section id="appendix-monster-and-mini-mtzs">
<h2 id="appendix-monster-and-mini-mtzs">Appendix: Monster and Mini MTZs<a class="headerlink" href="#appendix-monster-and-mini-mtzs" title="Permalink to this heading">¶</a></h2>
<p>Traditionally a single ‘monster’ MTZ file contained many columns with a
mixture of types of data. CCP4 programs that output MTZ files carried
over all of the data from an input MTZ file to the output MTZ file. In
the past, when running programs from scripts, this made handling data
files easier but now it has disadvantages: there is a redundancy of data
that takes up disk space, it is harder for the CCP4 database to keep
track of data and is less flexible for program input. But, most
seriously, ‘monster’ MTZs also require more complex user interfaces
where the user has to select the appropriate columns from the MTZ file.
We are now moving to using ‘mini’ MTZs that put observed data in one
file, FreeR flags in another and derived data such as phases and map
coefficients in their own files. The user interface is simplified - you
just have to select a file and CCP4i2 will deal with the columns.</p>
<p>Most existing CCP4 programs do not yet handle ‘mini’ MTZs but expect one
‘monster’ input MTZ. To cope with this the tasks which use many programs
automatically merge mini MTZs before running a program and split the
output MTZ afterwards. If you look in <em>Project directory</em> view of the
project (on the left-hand side of a project window) you will see listed,
for many jobs, the input and output merged MTZ files and log files for
the mtzjoin and mtzsplit utilities that perform the conversions.</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2020, CCP4.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.2.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>